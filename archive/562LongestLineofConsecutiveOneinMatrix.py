# coding=utf-8
'''
Created on 2017å¹?6æœ?19æ—?

@author: Administrator
'''


class Solution(object):

    def longestLine(self, M):
        """
        :type M: List[List[int]]
        :rtype: int
        """

        # ç¬¨æ–¹æ³?
        def foo(arr):
            res = 0
            temp = 0
            for num in arr:
                if num:
                    temp += 1
                else:
                    res = max(res, temp)
                    temp = 0
            res = max(res, temp)
            return res

        if M == []: return 0
        ans = 0
        m, n = len(M), len(M[0])
        print m, n
        for row in M:
            ans = max(ans, foo(row))
        for col in zip(*M):
            ans = max(ans, foo(col))
        # å¯¹è§’ (0,i)->(m-1-i,n-1) i=(0->n-1) å’? (i,0)->(m-1,n-i-1) i=(0->n-1)
        # åå¯¹è§?

        for y0 in xrange(n):
            x0 = 0
            arr = []
            while x0 < m and y0 < n:
                arr.append(M[x0][y0])
                x0 += 1
                y0 += 1
            ans = max(ans, foo(arr))

        for x0 in xrange(m):
            y0 = 0
            arr = []
            while x0 < m and y0 < n:
                arr.append(M[x0][y0])
                x0 += 1
                y0 += 1
            ans = max(ans, foo(arr))

        for y0 in xrange(n):
            x0 = 0
            arr = []
            while x0 < m and y0 >= 0:
                arr.append(M[x0][y0])
                x0 += 1
                y0 -= 1
            ans = max(ans, foo(arr))

        for x0 in xrange(m):
            y0 = n - 1
            arr = []
            while x0 < m and y0 >= 0:
                arr.append(M[x0][y0])
                x0 += 1
                y0 -= 1
            ans = max(ans, foo(arr))
        return ans


M = [[1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1],
    [1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1],
    [1, 1, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0],
    [1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 0, 1],
    [1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1],
    [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0],
    [0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1],
    [1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 1],
    [0, 1, 0, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1],
    [1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1],
    [1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1],
    [1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0],
    [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 0],
    [0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
    [1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1],
    [1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1],
    [0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0],
    [1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1],
    [1, 1, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1],
    [1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1],
    [1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0, 1, 1, 0, 1, 1, 0],
    [1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1],
    [1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 1],
    [0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1],
    [1, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1],
    [0, 1, 1, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1],
    [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1],
    [1, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1],
    [0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0],
    [1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0],
]

# M = [[1, 1, 1, 1, 1, 1, 1, 1],
#      [1, 1, 1, 1, 1, 1, 1, 1],
#      [1, 1, 1, 1, 0, 1, 1, 1],
#      [1, 1, 1, 1, 1, 1, 1, 1],
#      [1, 1, 1, 1, 1, 1, 1, 1]]
for x in M:
    print x
print Solution().longestLine(M)

# dp
# h[x][y] = M[x][y] * (h[x - 1][y]  + 1)
#
# v[x][y] = M[x][y] * (v[x][y - 1]  + 1)
#
# d[x][y] = M[x][y] * (d[x - 1][y - 1]  + 1)
#
# a[x][y] = M[x][y] * (a[x + 1][y - 1]  + 1)
# class Solution(object):
#     def longestLine(self, M):
#         """
#         :type M: List[List[int]]
#         :rtype: int
#         """
#         h, w = len(M), len(M) and len(M[0]) or 0
#         ans = 0
#
#         # horizontal & diagonal
#         diag = [[0] * w for r in range(h)]
#         for x in range(h):
#             cnt = 0
#             for y in range(w):
#                 cnt = M[x][y] * (cnt + 1)
#                 diag[x][y] = M[x][y]
#                 if x > 0 and y > 0 and M[x][y] and diag[x - 1][y - 1]:
#                     diag[x][y] += diag[x - 1][y - 1]
#                 ans = max(ans, cnt, diag[x][y])
#                 if ans == 17: print  x, y
#         # vertical & anti-diagonal
#         adiag = [[0] * w for r in range(h)]
#         for x in range(w):
#             cnt = 0
#             for y in range(h):
#                 cnt = M[y][x] * (cnt + 1)
#                 adiag[y][x] = M[y][x]
#                 if y < h - 1 and x > 0 and M[y][x] and adiag[y + 1][x - 1]:
#                     adiag[y][x] += adiag[y + 1][x - 1]
#                 ans = max(ans, cnt, adiag[y][x])
#                 if ans == 17: print x, y
#
#         return ans
